@model School.web.Models.RegisterViewModel
@{
    ViewBag.Title = "Register";
    Layout = "~/Views/Shared/_LoginLayout.cshtml";
}



@using (Html.BeginForm("Register", "Account", FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
{
    @Html.AntiForgeryToken()

    @Html.ValidationSummary("", new { @class = "text-danger" })
    <div class="input-group form-group">
        <div class="input-group-prepend">
            <span class="input-group-text"><i class="fas fa-user"></i></span>
        </div>
        @Html.TextBoxFor(m => m.Email, new { @class = "form-control" })

    </div>
    <div class="input-group form-group">
        <div class="input-group-prepend">
            <span class="input-group-text"><i class="fas fa-key"></i></span>
        </div>
        @Html.PasswordFor(m => m.Password, new { @class = "form-control" })
    </div>
    <div class="input-group form-group">
        <div class="input-group-prepend">
            <span class="input-group-text"><i class="fas fa-key"></i></span>
        </div>
        @Html.PasswordFor(m => m.ConfirmPassword, new { @class = "form-control" })
    </div>

    <div class="input-group form-group">
        <div class="input-group-prepend">
            <span class="input-group-text"><i class="fas fa-key"></i></span>
        </div>
        @Html.HiddenFor(x => x.ImageUrl)
        <input type="file" id="imageupload" class="form-control" />
        
    </div>
    <div class="input-group form-group">
        <div class="input-group-prepend">
          
        </div>
        
        <img id="showImage" class="form-control" style="height:100px;width:30px; margin-left:300px;" />
    </div>



    <div class="form-group">
        <input type="submit" value="Register" class="btn float-right login_btn" style="margin-right: 290px;
    margin-top: -70px;">
    </div>
}
    <div class="card-footer" style="margin-top:-37px">
        <div class="d-flex justify-content-center links">
           Do have an account?<a href="@Url.Action("Login","Account")">Sign In</a>
        </div>
        </div>


        <script>
        $("#imageupload").change(function () {
        var element = this;
        var formData = new FormData();
        var totalFiles = element.files.length;
        for (var i = 0; i < totalFiles; i++) {
            var file = element.files[i];
            formData.append("Photo", file);
        }

         $.ajax({
            type: 'POST',
             url: '@Url.Action("uploadImage", "Shared")',
             data: formData,
             dataType: 'json',
             contentType: false,
             processData: false

         }).done(function (response) {

             if (response.Success) {
                 $("#showImage").attr("src", response.Imageurl);
                 $("#ImageUrl").val(response.Imageurl);
             }


        }).fail(function (XMLHttpRequest, textStatus, errorThrown) {
            alert("F");
        });
    });
        </script>
